(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),u=t.n(o),c=t(14),i=t(2),l=t(3),d=t.n(l),m="/api/persons",s=function(){return d.a.get(m).then(function(e){return e.data})},f=function(e){return d.a.post(m,e).then(function(e){return e.data})},p=function(e){return d.a.delete("".concat(m,"/").concat(e.id))},E=function(e){return d.a.put("".concat(m,"/").concat(e.id),e).then(function(e){return e.data})},b=(t(38),function(e){var n=e.text;return a.a.createElement("h2",null,n)}),v=function(e){var n=e.person,t=e.deleteHandler;return a.a.createElement("div",null,n.name," ",n.number," ",a.a.createElement("button",{onClick:function(){t(n)}},"delete"))},h=function(e){var n=e.persons,t=e.filterQuery,r=e.deleteHandler;return a.a.createElement("div",null,n.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}).map(function(e){return a.a.createElement(v,{person:e,key:e.name,deleteHandler:r})}))},g=function(e){var n=e.data;return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:n.newName,onChange:n.updateNameInput})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:n.newNumber,onChange:n.updatePhoneInput})),a.a.createElement("button",{type:"submit",onClick:n.addPerson},"add"))},w=function(e){var n=e.updateHandler;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{onChange:n}))},O=function(e){var n=e.message,t=n.message,r=n.mode;return""===t?null:"error"===r?a.a.createElement("div",{className:"error"},t):a.a.createElement("div",{className:"notification"},t)},j=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),l=Object(i.a)(u,2),d=l[0],m=l[1],v=Object(r.useState)(""),j=Object(i.a)(v,2),N=j[0],C=j[1],x=Object(r.useState)(""),H=Object(i.a)(x,2),I=H[0],k=H[1],y=Object(r.useState)({message:"",mode:"notification"}),S=Object(i.a)(y,2),P=S[0],A=S[1],J=function(e,n){A({message:e,mode:n}),setTimeout(function(){return A({message:"",mode:"notification"})},5e3)};Object(r.useEffect)(function(){s().then(function(e){return o(e)}).catch(function(e){e.response.data.error?J(e.response.data.error,"error"):J(e.message,"error")})},[]);var L={newName:d,newNumber:N,updateNameInput:function(e){return m(e.target.value)},updatePhoneInput:function(e){return C(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.findIndex(function(e){return e.name===d});if(-1===n)f({name:d,number:N}).then(function(e){o(t.concat(e)),J("Added ".concat(e.name),"notification")}).catch(function(e){e.response.data.error?J(e.response.data.error,"error"):J(e.message,"error")});else if(window.confirm("Change the nuber of ".concat(t[n].name," ?"))){var r=Object(c.a)({},t[n],{number:N});E(r).then(function(e){o(t.map(function(n){return n.id!==e.id?n:e}))}).catch(function(e){e.response.data.error?J(e.response.data.error,"error"):J(e.message,"error")})}m(""),C("")}};return a.a.createElement("div",null,a.a.createElement(b,{text:"Filter"}),a.a.createElement(w,{updateHandler:function(e){return k(e.target.value)}}),a.a.createElement(b,{text:"Add new"}),a.a.createElement(O,{message:P}),a.a.createElement(g,{data:L}),a.a.createElement(b,{text:"Numbers"}),a.a.createElement(h,{persons:t,filterQuery:I,deleteHandler:function(e){window.confirm("delete ".concat(e.name," ?"))&&p(e).then(function(n){o(t.filter(function(n){return n.id!==e.id}))}).catch(function(e){J(e.message,"error")})}}))};u.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7029621d.chunk.js.map